# vim:filetype=i3

# Mod4 = Windows Key, Command Key, $mod
# Mod1 = Alt, $other
# Mod3 = Left Control, $mod

set $mod Mod4
set $other Mod1
set $update

for_window [class="^.*"] border pixel 3

#gaps config
gaps inner 20
gaps outer 5

# font for window titles. ISO 10646 = Unicode
# font pango: Source Code Pro 16
font pango: FontAwesome 12, Terminus 12

# User Mouse+$mod to drag floating windows to a position
floating_modifier $mod

# scratchpad, move and show, this is a hidden workspace where we can put windows
bindsym $mod+m move scratchpad
bindsym $mod+o scratchpad show

# move workspaces
bindsym $mod+comma move workspace to output left
bindsym $mod+period move workspace to output right

# mac like cross-hair screenshot
bindsym --release $other+Shift+4 exec --no-startup-id import ~/pictures/screenshots/$(date +%Y-%m-%d-%k%M%S)-scrot-targeted.png

# record animated gif
for_window [title="^gifcast$"] floating enable
for_window [title="^gifcast$"] border pixel 1
no_focus [title="^gifcast$"]
assign [title="^gifcast$"] → scratchpad
bindsym $other+Shift+5 mode "Make (s)election for recording."

mode "Make (s)election for recording." {
  bindsym s exec --no-startup-id termite -t gifcast -e ~/.scripts/capture-gif; mode "Recording GIF... Press Escape to stop recording."
  bindsym Escape [title="^gifcast$"] kill; mode "default"
}

mode "Recording GIF... Press Escape to stop recording." {
  bindsym Escape [title="^gifcast$"] kill; mode "default"
}

# start a terminal
bindsym $mod+Return exec termite

# kill focused window
bindsym $mod+$other+Q kill

# start dmenu
bindsym $other+space exec j4-dmenu-desktop --dmenu="dmenu -i -p 'Start:' -fn 'Source Code Pro-16' -b -nb '#262626' -nf '#ffffff' -sb '#ab4642' -sf '#000000'" --term="termite"

# i3 shorcuts for reload/restart/exit
bindsym $mod+$other+Shift+C reload
bindsym $mod+$other+Shift+R restart
bindsym $mod+$other+Shift+E exit

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# move focused window
bindsym $mod+$other+H move left
bindsym $mod+$other+J move down
bindsym $mod+$other+K move up
bindsym $mod+$other+L move right

# horizontal split
bindsym $mod+Shift+H split h

# vertical split
bindsym $mod+Shift+V split v

# zoom
bindsym $mod+$other+Z fullscreen

# change container layout (stacked, tabbed, default)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout default

# toggle tiling/floating
bindsym $mod+$other+space floating toggle

# change focus between tiling/floating windows
bindsym $mod+space focus mode_toggle

# next/previous workspace
bindsym $other+Tab focus right
bindsym $other+Shift+Tab focus l4eft
bindsym $mod+Tab workspace back_and_forth

# set workspace labels
set $w1 1:
set $w2 2:
set $w3 3:
set $w4 4:
set $w5 5:
set $w6 6
set $w7 7
set $w8 8
set $w9 9:
set $w0 10:

# open workspace
bindsym $mod+1 workspace $w1
bindsym $mod+2 workspace $w2
bindsym $mod+3 workspace $w3
bindsym $mod+4 workspace $w4
bindsym $mod+5 workspace $w5
bindsym $mod+6 workspace $w6
bindsym $mod+7 workspace $w7
bindsym $mod+8 workspace $w8
bindsym $mod+9 workspace $w9
bindsym $mod+0 workspace $w0

# move focused container to workspace
bindsym $mod+$other+1 move container to workspace $w1
bindsym $mod+$other+2 move container to workspace $w2
bindsym $mod+$other+3 move container to workspace $w3
bindsym $mod+$other+4 move container to workspace $w4
bindsym $mod+$other+5 move container to workspace $w5
bindsym $mod+$other+6 move container to workspace $w6
bindsym $mod+$other+7 move container to workspace $w7
bindsym $mod+$other+8 move container to workspace $w8
bindsym $mod+$other+9 move container to workspace $w9
bindsym $mod+$other+0 move container to workspace $w0

# change border
bindsym $mod+b border toggle

# starter
mode "(i)nitial dev | (e)mail | (w)eechat | (n)cmpcpp | (m)onitor initialization | (k)eyboard initialization" {
  bindsym i exec ~/.i3/starter
  bindsym e exec ~/.i3/startmutt
  bindsym w exec ~/.i3/startweechat
  bindsym n exec ~/.i3/startncmpcpp
  bindsym m mode "(1) DP1 left of LVDS1 | (2) No external connected | (3) Mirror displays"
  bindsym k mode "(1) Initialize Poker 2"

# back to normal
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindsym $other+Shift+R mode "(i)nitial dev | (e)mail | (w)eechat | (n)cmpcpp | (m)onitor initialization | (k)eyboard initialization"


mode "(1) DP1 left of LVDS1 | (2) No external connected | (3) Mirror displays" {
    bindsym 1 exec --no-startup-id ~/.screenlayout/external-dp-left-of-open-laptop.sh; mode "default"
    bindsym 2 exec --no-startup-id ~/.screenlayout/no-external.sh; mode "default"
    bindsym 3 exec --no-startup-id ~/.screenlayout/mirror-laptop-display; mode "default"

# back to normal
    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym XF86Display mode "default"

}
bindsym XF86Display mode "(1) DP1 left of LVDS1 | (2) No external connected | (3) Mirror displays"

mode "(1) Initialize Poker 2" {
  bindsym 1 exec --no-startup-id setxkbmap -option ctrl:nocaps; mode "default"

# back to normal
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# resize window
mode "resize" {
# These bindings trigger as soon as you enter the resize mode
  bindsym h resize shrink width 5 px or 5 ppt
    bindsym j resize grow height 5 px or 5 ppt
    bindsym k resize shrink height 5 px or 5 ppt
    bindsym l resize grow width 5 px or 5 ppt

# back to normal
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# volume control
bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5% && pactl set-sink-mute @DEFAULT_SINK@ 0 $update && pkill --signal RTMIN+2 i3blocks
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +5% && pactl set-sink-mute @DEFAULT_SINK@ 0 $update && pkill --signal RTMIN+2 i3blocks
bindsym XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle $update && pkill --signal RTMIN+2 i3blocks

# player control
bindsym XF86AudioPlay exec mpc toggle && pkill --signal RTMIN+2 i3blocks
bindsym XF86AudioPause exec mpc toggle && pkill --signal RTMIN+2 i3blocks
bindsym XF86AudioNext exec mpc next && pkill --signal RTMIN+2 i3blocks
bindsym XF86AudioPrev exec mpc prev && pkill --signal RTMIN+2 i3blocks

# brightness control
bindsym XF86MonBrightnessUp exec /usr/bin/xbacklight -inc 10
bindsym XF86MonBrightnessDown exec /usr/bin/xbacklight -dec 5

# Jump to urgent window
bindsym $mod+x [urgent=latest] focus

# color defines for zenburn styled i3
set $bg #2c2c2e
set $fg #9f9f9f
set $hi #efef8f
set $ac #a0afa0
set $tx #040404
set $ia #8f8f8f
set $be #8faf9f
set $yw #ccdc90
set $gn #88b090
set $rd #e89393

# set some nice colors  brd bkg txt
client.focused          $ac $ac $tx
client.unfocused        $bg $bg $ia
client.focused_inactive $bg $bg $ac
client.urgent           $rd $rd $tx

# bottom bar
bar {
  colors {
    background         #d3d3d3
    focused_workspace  #000000 #d3d3d3 #181818
    active_workspace   #000000 #d3d3d3 #181818
    inactive_workspace #d3d3d3 #d3d3d3 #181818
    urgent_workspace   #ff0000 #d3d3d3 #ff0000
  }

  binding_mode_indicator no
  font pango: FontAwesome 12, Terminus 12
  strip_workspace_numbers yes
  tray_output primary
}

# top bar
bar {
  colors {
    background         #181818
  }

  font pango: FontAwesome 12, Terminus 12
  position top
  status_command i3blocks -c ~/.i3/i3blocks.conf
  tray_output none
  workspace_buttons no
}

# Custom Keybinds
bindsym $mod+$other+Shift+L exec ~/.i3/i3exit
bindsym XF86ScreenSaver exec ~/.i3/i3lock.sh
bindsym Print exec scrot '%Y-%m-%d-%k%M%S-scrot-fullscreen.png' -e 'mv $f ~/pictures/screenshots/'

# autostart
exec --no-startup-id ~/.i3/autostart.sh

# start daemons
exec --no-startup-id pasystray
exec --no-startup-id nm-applet
exec --no-startup-id parcellite
exec --no-startup-id compton -bc -r 3 -l -4 -t -4 --shadow-exclude '_GTK_FRAME_EXTENTS@:c'
exec --no-startup-id volumeicon

# set wallpaper
exec --no-startup-id nitrogen --restore
